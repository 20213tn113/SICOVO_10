{% extends './body.html'%}

{% block container %}
<h1>Libros Disponibles</h1>

    <a href="{{ url_for('redicaddbook') }}" class="btn btn-success">Agregar Nuevo Libro</a>

<!-- Mensajes flash (por ejemplo, confirmaciones de éxito o error) -->
<div class="alert alert-info mt-4" role="alert">
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <ul>
                {% for message in messages %}
                    <li>{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}
</div>


<!-- Tabla para mostrar la lista de libros -->
<table class="table">
    <thead>
        <tr>
            <th>T&iacute;tulo</th>
            <th>Autor</th>
            <th>Precio</th>
            <th>Portada</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>


        {% for libro in libros %}



        <tr>
            <td>{{ libro.titulo }}</td>
            <td>{{ libro.autor }}</td>
            <td>${{ libro.precio }}</td>
            <td>
                {% if libro.imagen_portada %}
                    <img src="{{ url_for('static', filename='/img/portadas/' + libro.imagen_portada) }}" alt="Portada" width="50">
                {% else %}
                    No disponible
                {% endif %}
            </td>
            <td>
                <!-- Botón para editar el libro -->
                <a href="{{ url_for('login', id=libro.id) }}" class="btn btn-warning">Editar</a>
                <!-- Formulario para eliminar el libro con confirmación -->
                <form action="{{ url_for('login', id=libro.id) }}" method="POST" style="display:inline;">
                    <button type="submit" class="btn btn-danger" onclick="return confirm('¿Estás seguro de que deseas eliminar este libro?')">Eliminar</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- Botón para agregar un nuevo libro -->

{% endblock %}
